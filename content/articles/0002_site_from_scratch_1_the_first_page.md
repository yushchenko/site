id:     site-from-scratch-1-the-first-page
title:  Site from Scratch 1: The First Page
date:   July 31, 2010
tags:   site,development
status: draft


### Introduction

In building site, as in any other business, it's hard to start from the blank page.
It's much easier to make the first step if it's very shourt.
What can be simplier than a site with only one text page?
On the other hand, the first step should be done in the right direction
so the page will contain well formed HTML code generated by Django template
and styled with separate CSS style sheet.

### URLs

As according the old russian proverb a theater starts from the wardrobe, as a site starts from its URL.

First of all, the address should be as short as it possible, so own domain name is required.
Having spent a couple of hours for investigations, I decided to use [name.com][name.com].
I liked their relatively simple and fast site and also 'bike-to-work incentive program'
described in [the wikipedia article][name-com-wiki].
Our decisions are sometimes driven by strange motives, arn't they?

Next, the resource part of the URL should be short and verbose.
For example, link to this article should look something like this:

    site.name/blog/site-from-scratch-1-the-first-page

Short, helps to understand where we are now and even not so hard to type.

The connection between nice url and application's code is usually called 'URL routing'.
For [Google App Engine][app-engine] it can be configured either in `app.yaml` configuration file or
in webapp framework configuration.
The simplest routing contains just two lines of code:

    handlers:

    - url: /.*                # take any request to the site
      script: main.py         # and run code from main.py to generate response

At the begining of the `app.yaml` should be description of the app:

    application: site
    version: 1

and its runtime:

    runtime: python
    api_version: 1

At this stage basic configuration is done
and the site's ready to respond on incoming requests executing code in `main.py`
so it's a nice time to proceed with the next step.

### Markup Generation

App Engine Webapp framework includes Django templating engine.
Django templates is a powerfull mean of generation of text in any format including HTML and CSS.
As you remember, the initial step should be in the right direction so
the first Django's feature I'm going to use is [template enheritance][django-template-inheritance].
In nutshell, it allows create many pages with the same structure but different content.

`master.html` contains doctype and all tags required for well formed html document
plus simple grid's markup for using YUI CSS framework.

    <!DOCTYPE html>
    <html lang="en">
      <head>
        ...                                  {% templatetag opencomment %} links to ccs style sheets #}
        <title>{% templatetag openblock %} block title % }Valery Yushchenko{% templatetag openblock %} endblock % }</title>
      </head>
      <body>
        <div id="doc">
    
          <div id="hd">
          ...                                {% templatetag opencomment %} header content #}
          </div>
    
          <div id="bd">
            {% templatetag openblock %} block content %}{% templatetag openblock %} endblock %}
          </div>
    
          <div id="ft">
          ...                                {% templatetag opencomment %} footer content #}
          </div>
    
        </div>
      </body>
    </html>

`home.html` inherits from `master.html` and provides contents for master's blocks:

    {% templatetag openblock %} extends "master.html" %}
    
    {% templatetag openblock %} block content %}

    Hello World!                             {% templatetag opencomment %} text to display #}
    
    {% templatetag openblock %} endblock %}
    
Now let's allow Django render the from the template putting the following code into `main.py`:

    import os
    from google.appengine.ext.webapp import template
    
    home_file = os.path.join(os.path.dirname(__file__), 'home.html')
    
    print 'Content-Type: text/html'           # let the browser know that it's getting html
    print ''
    print template.render(home_file, {})      # return response content - the text itself


At this point, there are four files in applicaiton's directory:

    .../site/content/samples/site_from_scratch:
    -rw-rw-rw- 115 Jul 21 08:13 app.yaml
    -rw-rw-rw-  86 Jul 21 08:18 home.html
    -rw-rw-rw- 321 Jul 21 08:30 main.py
    -rw-rw-rw- 814 Jul 21 08:17 master.html

and the application is ready to run.
Type the following commands:

    cd site/content/samples
    dev_appserver.py site_from_scratch

and visit `http://localhost:8080/`.
Looks not so good, doesn't it? 
So, it's a good moment to style our page.

### Adding Styles


### Links

0. The first article of this cycle - [Site from Scratch 0: Introduction][s0];
1. Official App Engine's tutorial can be found [here][app-engine-tutorial];
2. Django templates documentation is [here][django-doc];
3. YUI 2 CSS tools: [reset][yui-reset], [base][yui-base], [fonts][yui-fonts], [grids][yui-grids]



[name.com]: http://www.name.com "Name.com web site"
[name-com-wiki]:http://en.wikipedia.org/wiki/Name.com "Wiki article about name.com"
[app-engine]: http://appengine.google.com/ "Google App Engine"
[django-template-inheritance]:http://www.djangoproject.com/documentation/0.96/templates/#template-inheritance "Django documentation: template inheritance"

[s0]: /blog/site-from-scratch-0-introduction "The first article about bilding own site"
[app-engine-tutorial]: http://code.google.com/appengine/docs/python/gettingstarted/ "Python App Engine tutorial"
[django-doc]: http://www.djangoproject.com/documentation/0.96/templates/ "Django templates, version 0.96"
[yui-reset]: http://developer.yahoo.com/yui/reset/ "YUI 2 Reset"
[yui-base]: http://developer.yahoo.com/yui/base/ "YUI 2 Base"
[yui-fonts]: http://developer.yahoo.com/yui/fonts/ "YUI 2 Fonts"
[yui-grids]: http://developer.yahoo.com/yui/grids/ "YUI 2 Grids"


