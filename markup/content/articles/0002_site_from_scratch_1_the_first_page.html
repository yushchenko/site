<h3>Introduction</h3>
<p>In building site, as in any other business, it's hard to begin from the blank.
To simplify the process I'm going to start creating only one page with only one paragraph of the text.
Nothing can be simplier, isn't it? So the step is going to be short and easy.</p>
<p>On the other hand, it's important to start in the right direction
so the page should contain well formed HTML generated by Django template
and styled with a separate CSS sheet.</p>
<h3>Preparing the Stage</h3>
<p>To play with source code from this article you need have <a href="http://www.python.org" title="Python Programming Language">Python</a> and <a href="http://appengine.google.com/" title="Google App Engine">Google App Engine</a> installed.</p>
<p>Example's source is located in the repository <a href="http://github.com/yushchenko/siteSample" title="Sample&apos;s repository on GitHub">here on GitHub</a> 
and I would recommend to clone it on your hard drive:</p>
<pre><code>git clone git@github.com:yushchenko/siteSample.git
</code></pre>
<p>For every example a separate branch will be created,
so the reader will be able to trace all history simply switching between these branches.</p>
<p>By the way, if you are willing to explore site's code itself, it can be found <a href="http://github.com/yushchenko/site" title="GitHub repository with source code of this site">here</a>.</p>
<p>Having preparations done let's move to building the site itself.</p>
<h3>Starting from URL</h3>
<p>As according the old Russian proverb - a theater starts from the wardrobe, as a site starts from the URL.</p>
<p>First of all, the address should be as short as it possible, so the name domain is required.
Having spent a couple of hours for investigations, I decided to use <a href="http://www.name.com" title="Name.com web site">name.com</a> registrar.
I liked their relatively simple and fast site and also 'bike-to-work incentive program'
described in <a href="http://en.wikipedia.org/wiki/Name.com" title="Wiki article about Name.com">the wikipedia article</a>.
Our decisions are sometimes driven by strange motives...</p>
<p>Next, the resource part of the URL should be short and verbose.
For example, the link to this article should look something like this:</p>
<pre><code>www.yushchenko.name/blog/site-from-scratch-1-the-first-page
</code></pre>
<p>Short, helps the user to understand where he's now and even not so hard to type.</p>
<p>The connection between a nice URL and application's code is usually called 'URL routing'.
For <a href="http://appengine.google.com/" title="Google App Engine">Google App Engine</a> it can be configured either in <code>app.yaml</code> config or
during webapp framework initialization.
The simplest routing contains just three lines of code:</p>
<pre><code>handlers:
- url: /.*                # take any request to the site
  script: main.py         # and run code from main.py to generate response
</code></pre>
<p>Besides this at the beginning of the <code>app.yaml</code> should be the description of the app:</p>
<pre><code>application: site
version: 1
</code></pre>
<p>and its run-time:</p>
<pre><code>runtime: python
api_version: 1
</code></pre>
<p>Now the basic configuration is done
and the site's ready to respond on incoming requests executing code in <code>main.py</code>
so it's a nice time to proceed with the next step.</p>
<h3>Markup Generation</h3>
<p>App Engine Webapp framework includes Django templates engine.
It's a powerful mean of generation text in any format including HTML and CSS.
As you remember, the initial step should be in the right direction, so
the first Django's feature I'm going to use is <a href="http://www.djangoproject.com/documentation/0.96/templates/#template-inheritance" title="Django documentation: template inheritance">template inheritance</a>.
In nutshell, it allows to create many pages with the same structure but different content.</p>
<p>Let's split page markup in two parts -
<code>master.html</code> that contains doctype and all tags required for well formed html document
plus simple grid's markup for YUI 2 CSS framework:</p>
<pre><code>&lt;!DOCTYPE html&gt;                          {% templatetag opencomment %} let's imagine that HTML5 is already with us #}
&lt;html lang="en"&gt;
  &lt;head&gt;
    ...                                  {% templatetag opencomment %} links to ccs style sheets #}
    &lt;title&gt;{% templatetag openblock %} block title % }Valery Yushchenko{% templatetag openblock %} endblock % }&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id="doc"&gt;

      &lt;div id="hd"&gt;
      ...                                {% templatetag opencomment %} header content #}
      &lt;/div&gt;

      &lt;div id="bd"&gt;
        {% templatetag openblock %} block content %}{% templatetag openblock %} endblock %}
      &lt;/div&gt;

      &lt;div id="ft"&gt;
      ...                                {% templatetag opencomment %} footer content #}
      &lt;/div&gt;

    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><code>home.html</code> template inherits from <code>master.html</code> and provides contents for master's blocks:</p>
<pre><code>{% templatetag openblock %} extends "master.html" %}

{% templatetag openblock %} block content %}

Hello World!                             {% templatetag opencomment %} text to display #}

{% templatetag openblock %} endblock %}
</code></pre>
<p>Now let's allow Django render the page putting the following code into <code>main.py</code>:</p>
<pre><code>import os
from google.appengine.ext.webapp import template

home_tmpl = os.path.join(os.path.dirname(__file__), 'markup/home.html')

print 'Content-Type: text/html'           # let the browser know that it's getting html
print ''
print template.render(home_tmpl, {})      # return response content - the text itself
</code></pre>
<p>At this point, there are five files in application's directories:</p>
<pre><code>.../siteSample:
drwxrwxrwx   0 Jul 22 20:20 markup
-rw-rw-rw- 134 Jul 21 21:01 README.md
-rw-rw-rw- 115 Jul 21 08:13 app.yaml
-rw-rw-rw- 328 Jul 22 20:20 main.py

.../siteSample/markup:
-rw-rw-rw-  86 Jul 21 08:18 home.html
-rw-rw-rw- 539 Jul 22 20:25 master.html
</code></pre>
<p>and the application is ready to run.</p>
<p>If you have cloned <a href="http://github.com/yushchenko/siteSample" title="Sample&apos;s repository on GitHub">sample's repo</a>, simply switch to branch <a href="http://github.com/yushchenko/siteSample/tree/example1" title="Sample&apos;s source code: example 1 - page + master page">example1</a> 
and execute the following command from <code>../siteSample</code> directory:</p>
<pre><code>dev_appserver.py siteSample
</code></pre>
<p>To look at the result of our efforts visit <code>http://localhost:8080/</code>.</p>
<p>Looks not so good, does it? 
So, it's a good moment to style our page.</p>
<h3>Adding Styles</h3>
<p>Styling HTML page might be a tricky business.
There are several popular browsers around and every of them has its own opinion how to treat certain details of CSS.
It's definitely not a big issue for the page with only one paragraph of text,
but I would like to avoid problems in the future mainly
because tinkering with CSS styles is not so interesting for me as programming or writing.</p>
<p>The best way to save time and simplify the life is usage of an existing CSS framework.
So, let's ask guys from Yahoo UI team to help me a bit adding the following link into the page:</p>
<pre><code>&lt;link rel="stylesheet" type="text/css"
      href="http://yui.yahooapis.com/combo?
      2.8.1/build/reset-fonts-grids/reset-fonts-grids.css&amp;2.8.1/build/base/base-min.css"&gt;
</code></pre>
<p>It tells the browser to load the file directly from Yahoo's content distribution network (CDN).</p>
<p>There are four components that are combined in the referenced style sheet.
YUI CSS <a href="http://developer.yahoo.com/yui/reset/" title="YUI 2 Reset">Reset</a> helps to minimize browser's particularities making further work easier,
<a href="http://developer.yahoo.com/yui/base/" title="YUI 2 Base">Base</a> and <a href="http://developer.yahoo.com/yui/fonts/" title="YUI 2 Fonts">Font</a> modules make standard HTML elements such as headers
and paragraphs look much more professional
and <a href="http://developer.yahoo.com/yui/grids/" title="YUI 2 Grids">Grids</a> CSS provides simple fixed size grid layout for the page.</p>
<p>Checkout branch <a href="http://github.com/yushchenko/siteSample/tree/example2" title="Sample&apos;s source code: example 2 - adding YUI 2 CSS Framework">example2</a> and see how the page looks styled by YUI 2 CSS.</p>
<p>Now the page looks better but I would like to change element's colors, margins and other minor details
adding the link to my CSS table:</p>
<pre><code>&lt;link rel="stylesheet" href="/styles/master.css" /&gt;
</code></pre>
<p>To make App Engine serve <code>master.css</code> file add static dir rout into <code>app.yaml</code>:</p>
<pre><code>- url: /styles
  static_dir: styles
</code></pre>
<p>Switch to branch <a href="http://github.com/yushchenko/siteSample/tree/example3" title="Sample&apos;s source code: example 3 - custom styles">example3</a> and run app to see fully styled "Hello World!" page.</p>
<h3>The next step</h3>
<p>Any site is completely useless without content and it's reasonable to fill this gap as soon as possible.
So in the next article I'm going to find out the most convenient way to put writings on recently the created page.</p>
<h3>Links</h3>
<ol>
<li>The first article of this cycle - <a href="/blog/site-from-scratch-0-introduction" title="Site from Scratch 0: Intorduction">Site from Scratch 0: Introduction</a>.</li>
<li>Official App Engine's tutorial can be found <a href="http://code.google.com/appengine/docs/python/gettingstarted/" title="Python App Engine tutorial">here</a>.</li>
<li>Django templates documentation is <a href="http://www.djangoproject.com/documentation/0.96/templates/" title="Django templates, version 0.96">here</a>.</li>
<li>YUI 2 CSS tools: <a href="http://developer.yahoo.com/yui/reset/" title="YUI 2 Reset">reset</a>, <a href="http://developer.yahoo.com/yui/base/" title="YUI 2 Base">base</a>, <a href="http://developer.yahoo.com/yui/fonts/" title="YUI 2 Fonts">fonts</a>, <a href="http://developer.yahoo.com/yui/grids/" title="YUI 2 Grids">grids</a>.</li>
</ol>